<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulateur Plan Pennylane - Partenaires Prescripteurs</title>
    
    <!-- React & ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    
    <!-- Babel pour transpiler JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts - Manrope -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Manrope', -apple-system, BlinkMacSystemFont, sans-serif;
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        const PRICING_CONFIG = {
          plans: {
            "Basique": [14, 29, 49],
            "Essentiel": [24, 49, 99],
            "Premium": [49, 79, 199],
            "Premium + Module Comptable": [79, 149, 298]
          }
        };

        const COLORS = {
          primary: "#00F872",
          primaryDark: "#006666",
          background: "#003D3D",
          lightBg: "#DAFBF2",
          border: "#96EAD3"
        };

        // UI Components
        const Card = ({ children, className = "", style = {} }) => (
            <div className={`rounded-lg border bg-white shadow-sm ${className}`} style={style}>{children}</div>
        );
        const CardHeader = ({ children }) => <div className="p-6 pb-4">{children}</div>;
        const CardTitle = ({ children, className = "" }) => <h3 className={`text-2xl font-bold ${className}`}>{children}</h3>;
        const CardContent = ({ children, className = "" }) => <div className={`p-6 pt-0 ${className}`}>{children}</div>;
        
        const Button = ({ children, onClick, disabled = false, variant = "default", className = "", style = {} }) => {
            const baseStyle = "px-4 py-2 rounded-lg font-semibold transition-all duration-300";
            const variantStyle = variant === "outline" 
                ? "border-2 border-slate-300 bg-white text-slate-700 hover:bg-slate-50"
                : "";
            return (
                <button 
                    onClick={onClick} 
                    disabled={disabled} 
                    className={`${baseStyle} ${variantStyle} ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'} ${className}`} 
                    style={style}
                >
                    {children}
                </button>
            );
        };
        
        const Badge = ({ children, className = "" }) => <span className={`inline-block rounded-full ${className}`}>{children}</span>;

        // Icons
        const CheckCircle2 = ({ className, style }) => (
            <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" />
                <polyline points="22 4 12 14.01 9 11.01" />
            </svg>
        );
        const ArrowRight = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="5" y1="12" x2="19" y2="12" />
                <polyline points="12 5 19 12 12 19" />
            </svg>
        );
        const ArrowLeft = ({ className }) => (
            <svg className={className} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <line x1="19" y1="12" x2="5" y2="12" />
                <polyline points="12 19 5 12 12 5" />
            </svg>
        );
        const Sparkles = ({ className, style }) => (
            <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <path d="M12 3v18M3 12h18M6.6 6.6l10.8 10.8M6.6 17.4L17.4 6.6" />
            </svg>
        );
        const Building2 = ({ className, style }) => (
            <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <rect x="2" y="7" width="20" height="14" rx="2" />
                <path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16" />
            </svg>
        );
        const TrendingUp = ({ className, style }) => (
            <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <polyline points="23 6 13.5 15.5 8.5 10.5 1 18" />
                <polyline points="17 6 23 6 23 12" />
            </svg>
        );
        const Info = ({ className, style }) => (
            <svg className={className} style={style} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2">
                <circle cx="12" cy="12" r="10" />
                <line x1="12" y1="16" x2="12" y2="12" />
                <line x1="12" y1="8" x2="12.01" y2="8" />
            </svg>
        );

        const SimulateurPlanPennylane = () => {
          const [state, setState] = useState({
            step: 0,
            answers: {
              comptaDansPL: "",
              nbComptables: 0,
              usersGestion: 0,
              usersEmployes: 0,
              fonctionnalitesPME: [],
              facturesAnnuelles: 0,
              fonctionnalitesEssentiel: [],
              fonctionnalitesPremium: []
            },
            result: null
          });

          const [showEmailPage, setShowEmailPage] = useState(false);
          const [emailCopied, setEmailCopied] = useState(false);
          const maxSteps = 6;

          const calculateResult = (answers) => {
            const totalUsers = answers.nbComptables + answers.usersGestion + answers.usersEmployes;
            const gestionPlusCompta = answers.usersGestion + answers.nbComptables;
            
            if (totalUsers > 10 || gestionPlusCompta > 5 || answers.nbComptables > 1 || 
                answers.facturesAnnuelles > 3600 || 
                (answers.fonctionnalitesPME.length > 0 && !answers.fonctionnalitesPME.includes("aucune"))) {
              return {
                plan: "PME sur mesure",
                palier: 0,
                prix: 0,
                usersIncluded: "Utilisateurs illimit√©s",
                facturesMax: "Factures illimit√©es",
                fonctionnalites: [
                  "Toutes les fonctionnalit√©s Premium + CI",
                  "Fonction groupe et gestion multi-entit√©s",
                  "EBICS T et paiements avanc√©s",
                  "API PME compl√®te",
                  "Circuits de validation multiniveaux",
                  "Demandes d'achat et de paiement",
                  "Account Manager d√©di√©"
                ]
              };
            }

            let palier = 1;
            const effectiveGestion = gestionPlusCompta;
            
            if (effectiveGestion === 2 || (answers.usersEmployes >= 1 && answers.usersEmployes <= 3)) {
              palier = Math.max(palier, 2);
            }
            if (effectiveGestion >= 3 || answers.usersEmployes >= 4) {
              palier = Math.max(palier, 3);
            }
            if (answers.facturesAnnuelles >= 1200 && answers.facturesAnnuelles < 2400) {
              palier = Math.max(palier, 2);
            }
            if (answers.facturesAnnuelles >= 2400) {
              palier = Math.max(palier, 3);
            }

            const usersIncluded = [];
            if (palier === 1) usersIncluded.push("1 utilisateur Gestion");
            else if (palier === 2) usersIncluded.push("Jusqu'√† 2 utilisateurs Gestion");
            else usersIncluded.push("Jusqu'√† 5 utilisateurs Gestion");
            
            if (palier === 2) usersIncluded.push("Jusqu'√† 3 utilisateurs Employ√©s");
            else if (palier === 3) usersIncluded.push("Jusqu'√† 5 utilisateurs Employ√©s");
            
            if (answers.nbComptables > 0) usersIncluded.push("1 utilisateur Comptable interne");

            const facturesMax = palier === 1 ? "1 200 factures/an" : 
                               palier === 2 ? "2 400 factures/an" : 
                               "3 600 factures/an";

            let plan = "";
            let fonctionnalites = [];

            if (answers.comptaDansPL === "oui") {
              plan = "Premium + Module Comptable";
              fonctionnalites = [
                "Toutes les fonctionnalit√©s Premium",
                "Saisie comptable compl√®te",
                "D√©clarations TVA et liasse fiscale",
                "Module de r√©vision et cut-off",
                "√âtats financiers personnalisables"
              ];
            } else {
              const hasPremium = answers.fonctionnalitesPremium.length > 0 && 
                                !answers.fonctionnalitesPremium.includes("aucune");
              const hasEssentiel = answers.fonctionnalitesEssentiel.length > 0 && 
                                  !answers.fonctionnalitesEssentiel.includes("aucune");
              
              if (hasPremium) {
                plan = "Premium";
                fonctionnalites = [
                  "Circuits de validation",
                  "Rapports analytiques avanc√©s",
                  "Data Sharing",
                  "Tableaux de bords personnalisables"
                ];
              } else if (hasEssentiel) {
                plan = "Essentiel";
                fonctionnalites = [
                  "Relances automatiques",
                  "Factures r√©currentes",
                  "Int√©grations cl√©-en-main",
                  "Notes de frais",
                  "Analytique et pr√©visionnel"
                ];
              } else {
                plan = "Basique";
                fonctionnalites = [
                  "Facturation clients illimit√©e",
                  "Gestion des d√©penses",
                  "Paiement fournisseurs",
                  "Compte Pro avec cartes"
                ];
              }
            }

            return {
              plan,
              palier,
              prix: PRICING_CONFIG.plans[plan]?.[palier - 1] || 0,
              usersIncluded: usersIncluded.join(", "),
              facturesMax,
              fonctionnalites
            };
          };

          const goNext = () => {
            if (state.step === 0) {
              setState({ ...state, step: 1 });
              return;
            }
            if (state.step === 1) {
              const totalUsers = state.answers.nbComptables + state.answers.usersGestion + state.answers.usersEmployes;
              const gestionPlusCompta = state.answers.usersGestion + state.answers.nbComptables;
              
              if (totalUsers > 10 || gestionPlusCompta > 5 || state.answers.nbComptables > 1) {
                setState({ ...state, result: calculateResult(state.answers), step: maxSteps });
                return;
              }
              setState({ ...state, step: 2 });
              return;
            }
            if (state.step === 2) {
              if (state.answers.fonctionnalitesPME.length > 0 && 
                  !state.answers.fonctionnalitesPME.includes("aucune")) {
                setState({ ...state, result: calculateResult(state.answers), step: maxSteps });
                return;
              }
              setState({ ...state, step: 3 });
              return;
            }
            if (state.step === 3) {
              if (state.answers.facturesAnnuelles > 3600) {
                setState({ ...state, result: calculateResult(state.answers), step: maxSteps });
                return;
              }
              if (state.answers.comptaDansPL === "oui") {
                setState({ ...state, result: calculateResult(state.answers), step: maxSteps });
                return;
              }
              setState({ ...state, step: 4 });
              return;
            }
            if (state.step === 4) {
              setState({ ...state, step: 5 });
              return;
            }
            if (state.step === 5) {
              setState({ ...state, result: calculateResult(state.answers), step: maxSteps });
              return;
            }
          };

          const goBack = () => {
            if (state.step === maxSteps) {
              setState({
                step: 0,
                result: null,
                answers: {
                  comptaDansPL: "",
                  nbComptables: 0,
                  usersGestion: 0,
                  usersEmployes: 0,
                  fonctionnalitesPME: [],
                  facturesAnnuelles: 0,
                  fonctionnalitesEssentiel: [],
                  fonctionnalitesPremium: []
                }
              });
              setShowEmailPage(false);
              return;
            }
            setState({ ...state, step: Math.max(0, state.step - 1) });
          };

          const canProceed = () => {
            switch (state.step) {
              case 0: return state.answers.comptaDansPL !== "";
              case 1: 
                if (state.answers.comptaDansPL === "oui") {
                  return state.answers.nbComptables > 0 && state.answers.usersGestion > 0;
                } else {
                  return state.answers.usersGestion > 0;
                }
              case 2: return state.answers.fonctionnalitesPME.length > 0;
              case 3: return state.answers.facturesAnnuelles > 0;
              case 4: return state.answers.fonctionnalitesEssentiel.length > 0;
              case 5: return state.answers.fonctionnalitesPremium.length > 0;
              default: return false;
            }
          };

          const getProgressPercentage = () => {
            if (state.step >= maxSteps) return 100;
            const totalQuestions = state.answers.comptaDansPL === "oui" ? 4 : 6;
            return Math.round((state.step / totalQuestions) * 100);
          };

          const InfoBox = ({ children }) => (
            <div className="rounded-xl p-6 border-2 bg-teal-50" style={{ borderColor: COLORS.border }}>
              <div className="flex items-start gap-3">
                <Info className="w-6 h-6 flex-shrink-0 mt-1" style={{ color: COLORS.primary }} />
                <div className="flex-1 space-y-2">{children}</div>
              </div>
            </div>
          );

          const RadioOption = ({ checked, onChange, label }) => (
            <label className="flex items-start gap-3 p-4 rounded-xl border-2 cursor-pointer transition-all hover:border-teal-400 hover:bg-teal-50/50">
              <input
                type="radio"
                checked={checked}
                onChange={onChange}
                className="mt-1 w-4 h-4 accent-teal-500"
              />
              <span className="flex-1 text-slate-700">{label}</span>
            </label>
          );

          const UserDropdown = ({ label, value, onChange, disabled = false, description, examples }) => {
            const options = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, "10+"];
            
            const handleChange = (e) => {
              e.preventDefault();
              const newValue = e.target.value === "10+" ? 11 : parseInt(e.target.value);
              onChange(newValue);
            };
            
            return (
              <div className="space-y-3">
                <InfoBox>
                  <p className="font-bold text-lg text-slate-800">{label}</p>
                  <p className="text-slate-600" dangerouslySetInnerHTML={{ __html: description }} />
                  <p className="text-slate-500 text-sm italic">{examples}</p>
                </InfoBox>
                <div className="flex items-center justify-between gap-4 p-4 rounded-xl border-2 bg-white" style={{ borderColor: COLORS.border, opacity: disabled ? 0.6 : 1 }}>
                  <span className="font-semibold text-slate-700">{label}</span>
                  <select
                    value={value === 11 ? "10+" : value}
                    onChange={handleChange}
                    disabled={disabled}
                    className="px-4 py-2 rounded-lg border-2 bg-white text-slate-700 font-semibold cursor-pointer disabled:cursor-not-allowed disabled:bg-slate-100"
                    style={{ borderColor: COLORS.border }}
                  >
                    {options.map(opt => (
                      <option key={opt} value={opt}>{opt}</option>
                    ))}
                  </select>
                </div>
                {disabled && (
                  <p className="text-sm text-slate-500 flex items-center gap-2">
                    <Info className="w-4 h-4" />
                    Non disponible - Comptabilit√© externalis√©e
                  </p>
                )}
              </div>
            );
          };

          const FeatureWithTooltip = ({ title, description }) => {
            const [showTooltip, setShowTooltip] = useState(false);

            return (
              <li className="flex items-start gap-3 relative">
                <div 
                  className="relative"
                  onMouseEnter={() => setShowTooltip(true)}
                  onMouseLeave={() => setShowTooltip(false)}
                >
                  <Info 
                    className="w-5 h-5 flex-shrink-0 mt-0.5 cursor-help transition-colors" 
                    style={{ color: COLORS.primary }}
                  />
                  {showTooltip && (
                    <div 
                      className="absolute left-0 top-6 w-80 p-4 rounded-lg shadow-xl border-2 bg-white z-50"
                      style={{ borderColor: COLORS.border }}
                    >
                      <p className="text-sm text-slate-700 leading-relaxed">{description}</p>
                    </div>
                  )}
                </div>
                <span className="text-slate-700 flex-1"><strong>{title}</strong></span>
              </li>
            );
          };

          const renderQuestion = () => {
            if (state.step === 0) {
              return (
                <div className="space-y-8">
                  <div className="space-y-4">
                    <h2 className="text-4xl font-bold text-slate-800">Module comptable</h2>
                    <p className="text-xl text-slate-600">
                      La comptabilit√© est-elle g√©r√©e en interne ou externalis√©e aupr√®s de votre expert comptable ?
                    </p>
                  </div>
                  <div className="space-y-3">
                    <RadioOption
                      checked={state.answers.comptaDansPL === "oui"}
                      onChange={() => setState({ ...state, answers: { ...state.answers, comptaDansPL: "oui" } })}
                      label="Internalis√©e, ou au moins une partie (Expert Comptable en r√©vision)"
                    />
                    <RadioOption
                      checked={state.answers.comptaDansPL === "non"}
                      onChange={() => setState({ ...state, answers: { ...state.answers, comptaDansPL: "non", nbComptables: 0 } })}
                      label="Externalis√©e, notre comptabilit√© est g√©r√©e par notre Expert Comptable"
                    />
                  </div>
                </div>
              );
            }

            if (state.step === 1) {
              return (
                <div className="space-y-8">
                  <div className="space-y-4">
                    <h2 className="text-4xl font-bold text-slate-800">
                      De combien d'utilisateurs par type d'acc√®s avez-vous besoin ?
                    </h2>
                    <p className="text-lg text-slate-600">
                      Un utilisateur ne peut avoir qu'un seul type d'acc√®s
                    </p>
                  </div>
                  
                  <UserDropdown
                    label="Utilisateur Comptable"
                    value={state.answers.nbComptables}
                    onChange={(val) => setState({ ...state, answers: { ...state.answers, nbComptables: val } })}
                    disabled={state.answers.comptaDansPL === "non"}
                    description="Utilisateur ayant acc√®s complet aux modules de Gestion ET de Comptabilit√©. Peut g√©rer toute la comptabilit√© de l'entreprise ainsi que les processus de vente, achat et tr√©sorerie. R√¥le r√©serv√© aux entreprises en comptabilit√© internalis√©e uniquement.<br/><br/><em>L'expert comptable n'est pas √† compter parmi ces utilisateurs.</em>"
                    examples="Exemples : Comptable fournisseurs, Comptable clients, Directeur Comptable, Responsable comptable"
                  />

                  <UserDropdown
                    label="Utilisateur Gestion"
                    value={state.answers.usersGestion}
                    onChange={(val) => setState({ ...state, answers: { ...state.answers, usersGestion: val } })}
                    description="Utilisateur ayant acc√®s aux modules Gestion (Ventes, Achats, Transactions, Analytique). Peut g√©rer la facturation clients/fournisseurs, les op√©rations bancaires et le pilotage de l'activit√©."
                    examples="Exemples : Dirigeant/Admin, Gestionnaire de facturation (clients et/ou fournisseurs)"
                  />

                  <UserDropdown
                    label="Utilisateur Employ√©"
                    value={state.answers.usersEmployes}
                    onChange={(val) => setState({ ...state, answers: { ...state.answers, usersEmployes: val } })}
                    description="Utilisateur ayant acc√®s <strong>UNIQUEMENT</strong> aux notes de frais, carte bancaire Pennylane et demandes d'achat."
                    examples="Exemples : Commerciaux, Responsables Marketing, Chefs de projet et autres m√©tiers non li√©s √† la comptabilit√©/gestion"
                  />
                </div>
              );
            }

            if (state.step === 2) {
              const pmeFeatures = [
                {
                  title: "EBICS T",
                  description: "Standard bancaire europ√©en permettant d'initier des virements et pr√©l√®vements directement depuis Pennylane vers votre banque, sans passer par un interm√©diaire."
                },
                {
                  title: "Module intercos et r√©ciprocit√©s",
                  description: "Automatise les transactions entre vos diff√©rentes soci√©t√©s : factures inter-entit√©s, pr√™ts/emprunts internes, comptes courants d'associ√©s. G√©n√®re les √©critures comptables dans les deux soci√©t√©s simultan√©ment."
                },
                {
                  title: "Multi-entit√©s",
                  description: "G√©rez plusieurs soci√©t√©s juridiques ind√©pendantes depuis une interface unique. Navigation fluide entre entit√©s + tableaux de bord consolid√©s au niveau groupe."
                },
                {
                  title: "Circuits de validation 2+ niveaux",
                  description: "Cr√©ez des processus de validation avanc√©s avec 2 validateurs ou plus. Id√©al pour les grandes structures n√©cessitant plusieurs niveaux d'approbation selon les montants ou cat√©gories."
                },
                {
                  title: "Demandes d'achat, bon de commande, bon de r√©ception, demandes de paiements",
                  description: "Workflow complet de gestion des achats, de l'expression du besoin jusqu'au paiement fournisseur. Inclut : demandes d'achat, bons de commande, accus√©s de r√©ception et demandes de paiement avec validation."
                },
                {
                  title: "Plan analytique structur√©",
                  description: "Analytique avanc√©e avec plusieurs axes d'analyse simultan√©s (projets, d√©partements, sites...) et structure hi√©rarchique. Permet un pilotage financier pr√©cis par segment d'activit√©."
                },
                {
                  title: "Int√©grations sp√©cifiques : Yooz, Salesforce, Agicap, Zeendoc",
                  description: "Synchronisation native avec vos outils professionnels : Yooz (import automatique des factures d√©mat√©rialis√©es), Salesforce (sync clients/devis/commandes), Agicap (export des donn√©es de tr√©sorerie), Zeendoc (archivage documentaire automatique)."
                }
              ];

              return (
                <div className="space-y-8">
                  <div className="space-y-4">
                    <h2 className="text-4xl font-bold text-slate-800">Fonctionnalit√©s avanc√©es PME</h2>
                    <p className="text-xl text-slate-600">
                      Votre client a-t-il besoin d'au moins une de ces fonctionnalit√©s avanc√©es ?
                    </p>
                    <Badge className="text-sm px-3 py-1 bg-emerald-100 text-emerald-700">
                      Disponible uniquement avec l'offre PME sur mesure
                    </Badge>
                    <div className="rounded-xl p-5 border-2 bg-white" style={{ borderColor: COLORS.border }}>
                      <ul className="space-y-3">
                        {pmeFeatures.map((feature, i) => (
                          <FeatureWithTooltip
                            key={i}
                            title={feature.title}
                            description={feature.description}
                          />
                        ))}
                      </ul>
                    </div>
                  </div>
                  <div className="space-y-3">
                    <RadioOption
                      checked={state.answers.fonctionnalitesPME.includes("needsPME")}
                      onChange={() => setState({ ...state, answers: { ...state.answers, fonctionnalitesPME: ["needsPME"] } })}
                      label="Oui, besoin d'au moins une de ces fonctionnalit√©s"
                    />
                    <RadioOption
                      checked={state.answers.fonctionnalitesPME.includes("aucune")}
                      onChange={() => setState({ ...state, answers: { ...state.answers, fonctionnalitesPME: ["aucune"] } })}
                      label="Non, aucune de ces fonctionnalit√©s n'est n√©cessaire"
                    />
                  </div>
                </div>
              );
            }

            if (state.step === 3) {
              return (
                <div className="space-y-6">
                  <div className="space-y-4">
                    <h2 className="text-4xl font-bold text-slate-800">Volume de factures</h2>
                    <p className="text-xl text-slate-600">
                      Quelle est la volum√©trie annuelle de factures (achats + ventes + notes de frais) ?
                    </p>
                  </div>
                  <div className="space-y-3">
                    {[
                      { value: 600, label: "0 √† 1 200 factures/an (‚âà 0-100/mois)" },
                      { value: 1800, label: "1 200 √† 2 400 factures/an (‚âà 100-200/mois)" },
                      { value: 3000, label: "2 400 √† 3 600 factures/an (‚âà 200-300/mois)" },
                      { value: 4000, label: "Plus de 3 600 factures/an (‚âà 300+/mois)" }
                    ].map((option) => (
                      <RadioOption
                        key={option.value}
                        checked={state.answers.facturesAnnuelles === option.value}
                        onChange={() => setState({ ...state, answers: { ...state.answers, facturesAnnuelles: option.value } })}
                        label={option.label}
                      />
                    ))}
                  </div>
                </div>
              );
            }

            if (state.step === 4) {
              return (
                <div className="space-y-8">
                  <div className="space-y-4">
                    <h2 className="text-4xl font-bold text-slate-800">Fonctionnalit√©s du Module Gestion</h2>
                    <p className="text-xl text-slate-600">
                      Votre client a-t-il besoin d'au moins une de ces fonctionnalit√©s ?
                    </p>
                    <Badge className="text-sm px-3 py-1 bg-emerald-100 text-emerald-700">
                      Disponible uniquement √† partir du plan Essentiel
                    </Badge>
                    <div className="rounded-xl p-5 border-2 bg-white" style={{ borderColor: COLORS.border }}>
                      <ul className="space-y-3">
                        {[
                          "Relances automatiques des factures impay√©es",
                          "Factures r√©currentes / Abonnements clients",
                          "Int√©grations cl√©-en-main (Shopify, Sellsy, +150 outils)",
                          "Notes de frais avec indemnit√©s kilom√©triques",
                          "Analytique et pr√©visionnel de tr√©sorerie"
                        ].map((f, i) => (
                          <li key={i} className="flex items-start gap-3">
                            <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                            <span className="text-slate-700"><strong>{f}</strong></span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  </div>
                  <div className="space-y-3">
                    <RadioOption
                      checked={state.answers.fonctionnalitesEssentiel.includes("needsEssentiel")}
                      onChange={() => setState({ ...state, answers: { ...state.answers, fonctionnalitesEssentiel: ["needsEssentiel"] } })}
                      label="Oui, besoin d'au moins une de ces fonctionnalit√©s"
                    />
                    <RadioOption
                      checked={state.answers.fonctionnalitesEssentiel.includes("aucune")}
                      onChange={() => setState({ ...state, answers: { ...state.answers, fonctionnalitesEssentiel: ["aucune"] } })}
                      label="Non, ces fonctionnalit√©s ne sont pas n√©cessaires"
                    />
                  </div>
                </div>
              );
            }

            if (state.step === 5) {
              return (
                <div className="space-y-8">
                  <div className="space-y-4">
                    <h2 className="text-4xl font-bold text-slate-800">Fonctionnalit√©s du Module Gestion</h2>
                    <p className="text-xl text-slate-600">
                      Votre client a-t-il besoin d'au moins une de ces fonctionnalit√©s ?
                    </p>
                    <Badge className="text-sm px-3 py-1 bg-emerald-100 text-emerald-700">
                      Disponible uniquement √† partir du plan Premium
                    </Badge>
                    <div className="rounded-xl p-5 border-2 bg-white" style={{ borderColor: COLORS.border }}>
                      <ul className="space-y-3">
                        {[
                          "Circuits de validation des achats (workflows d'approbation)",
                          "Rapports analytiques avanc√©s (ventilation multi-axes)",
                          "Data Sharing (exports vers Power BI, Tableau, Excel)",
                          "Tableaux de bords personnalisables avec KPI",
                          "Rapports comptables (Grand Livre, Balances, P&L)"
                        ].map((f, i) => (
                          <li key={i} className="flex items-start gap-3">
                            <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                            <span className="text-slate-700"><strong>{f}</strong></span>
                          </li>
                        ))}
                      </ul>
                    </div>
                  </div>
                  <div className="space-y-3">
                    <RadioOption
                      checked={state.answers.fonctionnalitesPremium.includes("needsPremium")}
                      onChange={() => setState({ ...state, answers: { ...state.answers, fonctionnalitesPremium: ["needsPremium"] } })}
                      label="Oui, besoin d'au moins une de ces fonctionnalit√©s"
                    />
                    <RadioOption
                      checked={state.answers.fonctionnalitesPremium.includes("aucune")}
                      onChange={() => setState({ ...state, answers: { ...state.answers, fonctionnalitesPremium: ["aucune"] } })}
                      label="Non, ces fonctionnalit√©s ne sont pas n√©cessaires"
                    />
                  </div>
                </div>
              );
            }

            return null;
          };

          const renderEmailPage = () => {
            if (!state.result) return null;
            const isPME = state.result.plan === "PME sur mesure";
            const emailSubject = `Demande de devis - Plan ${state.result.plan}`;
            const emailBody = isPME 
              ? `Bonjour Jules,\n\nJe souhaite obtenir un devis personnalis√© pour l'offre PME sur mesure de Pennylane.\n\nüìã CONTEXTE DU BESOIN\nSuite √† ma simulation, mon client n√©cessite une solution sur mesure d√©passant les plans standards.\n\nüìù INFORMATIONS POUR LE DEVIS\nMerci de me recontacter pour √©changer sur ce projet.\n\nSIGNATAIRE DU DEVIS\n- Nom : [√Ä COMPL√âTER]\n- Pr√©nom : [√Ä COMPL√âTER]\n- Email : [√Ä COMPL√âTER]\n- T√©l√©phone : [√Ä COMPL√âTER]\n\nENTREPRISE\n- Nom de l'entreprise : [√Ä COMPL√âTER]\n- SIREN : [√Ä COMPL√âTER]\n- Secteur d'activit√© : [√Ä COMPL√âTER]\n- Effectif : [√Ä COMPL√âTER]\n\nüìû Disponibilit√©s pour un rendez-vous :\n- [√Ä COMPL√âTER]\n\nCordialement`
              : `Bonjour Jules,\n\nJe souhaite obtenir un devis pour le plan ${state.result.plan}.\n\nüìã D√âTAILS DU SIMULATEUR\n- Plan recommand√© : ${state.result.plan}\n- Prix indicatif : ${state.result.prix}‚Ç¨/mois HT\n- Utilisateurs : ${state.result.usersIncluded}\n- Factures : ${state.result.facturesMax}\n\nüìù COMPL√âTEZ VOS INFORMATIONS CI-DESSOUS\nMerci de remplir les champs suivants avant d'envoyer votre demande :\n\nSIGNATAIRE DU DEVIS\n- Nom : [√Ä COMPL√âTER]\n- Pr√©nom : [√Ä COMPL√âTER]\n- Email : [√Ä COMPL√âTER]\n\nENTREPRISE\n- Nom de l'entreprise : [√Ä COMPL√âTER]\n- SIREN : [√Ä COMPL√âTER]\n\nCordialement`;

            const copyToClipboard = () => {
              navigator.clipboard.writeText(emailBody).then(() => {
                setEmailCopied(true);
                setTimeout(() => setEmailCopied(false), 3000);
              });
            };

            return (
              <div className="space-y-6">
                <div className="text-center space-y-4">
                  <div className="text-6xl mb-4">üìß</div>
                  <h2 className="text-4xl font-bold text-slate-800">Demande de devis</h2>
                  <p className="text-xl text-slate-600">
                    Pour obtenir votre devis personnalis√© pour le plan <strong>{state.result.plan}</strong>
                  </p>
                </div>
                <Card>
                  <CardContent className="p-8 space-y-6">
                    <div>
                      <p className="text-lg mb-4 font-semibold text-center text-slate-800">
                        üìã Message √† copier et envoyer par email
                      </p>
                      <div className="rounded-xl p-6 border-2 mb-4 font-mono text-sm whitespace-pre-wrap bg-slate-50 text-slate-700" style={{ borderColor: COLORS.border }}>
                        <div className="mb-4 pb-4 border-b-2 border-slate-200">
                          <p><strong>√Ä :</strong> jules.prevosteau@pennylane.com</p>
                          <p><strong>Objet :</strong> {emailSubject}</p>
                        </div>
                        {emailBody}
                      </div>
                      <Button 
                        onClick={copyToClipboard} 
                        variant="outline"
                        className="w-full font-semibold text-lg"
                      >
                        {emailCopied ? '‚úì Message copi√© !' : 'üìã Copier le message'}
                      </Button>
                    </div>
                    <div className="text-center pt-4">
                      <Button
                        onClick={() => {
                          window.location.href = `mailto:jules.prevosteau@pennylane.com?subject=${encodeURIComponent(emailSubject)}&body=${encodeURIComponent(emailBody)}`;
                        }}
                        className="w-full font-semibold text-lg text-white"
                        style={{ backgroundColor: COLORS.primary, color: COLORS.background }}
                      >
                        üì® Envoyer un email √† jules.prevosteau@pennylane.com
                      </Button>
                    </div>
                  </CardContent>
                </Card>
                <div className="flex gap-4">
                  <Button onClick={() => setShowEmailPage(false)} variant="outline" className="flex-1 font-semibold text-lg">
                    ‚Üê Retour au r√©sultat
                  </Button>
                  <Button onClick={goBack} variant="outline" className="flex-1 font-semibold text-lg">
                    Recommencer
                  </Button>
                </div>
              </div>
            );
          };

          const renderResult = () => {
            if (!state.result) return null;
            const isPME = state.result.plan === "PME sur mesure";

            return (
              <div className="space-y-6">
                <div className="text-center space-y-4">
                  <CheckCircle2 className="w-20 h-20 mx-auto text-emerald-500" />
                  <h2 className="text-4xl font-bold text-slate-800">Plan recommand√©</h2>
                  <Badge className="text-xl px-8 py-3 bg-gradient-to-r from-emerald-500 to-teal-500 text-white">
                    {state.result.plan}
                  </Badge>
                </div>

                <Card>
                  <CardHeader>
                    <CardTitle className="flex items-center gap-2">
                      <Sparkles className="w-5 h-5" />
                      D√©tails de l'offre
                    </CardTitle>
                  </CardHeader>
                  <CardContent className="space-y-6">
                    {!isPME && (
                      <>
                        <div className="text-center py-8 rounded-2xl border-2 shadow-lg" style={{ backgroundColor: COLORS.lightBg, borderColor: COLORS.border }}>
                          <div className="text-7xl font-black mb-3" style={{ color: COLORS.primary }}>
                            {state.result.prix}‚Ç¨
                          </div>
                          <div className="font-semibold text-lg text-slate-700">HT / mois - Sans engagement</div>
                        </div>
                        <div className="p-6 rounded-xl border-2 bg-white" style={{ borderColor: COLORS.border }}>
                          <div className="font-bold text-xl mb-4 flex items-center gap-3 text-slate-800">
                            <TrendingUp className="w-6 h-6" style={{ color: COLORS.primary }} />
                            Ce plan d'abonnement inclut :
                          </div>
                          <ul className="space-y-3">
                            {state.result.usersIncluded.split(", ").map((u, i) => (
                              <li key={i} className="flex items-start gap-3">
                                <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                                <span className="text-slate-700">{u}</span>
                              </li>
                            ))}
                            <li className="flex items-start gap-3">
                              <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                              <span className="text-slate-700">Maximum {state.result.facturesMax}</span>
                            </li>
                          </ul>
                        </div>
                      </>
                    )}

                    {isPME && (
                      <div className="p-8 rounded-2xl border-2 shadow-lg" style={{ backgroundColor: COLORS.lightBg, borderColor: COLORS.border }}>
                        <div className="flex items-center gap-4 mb-4">
                          <Building2 className="w-10 h-10" style={{ color: COLORS.primary }} />
                          <div>
                            <div className="font-bold text-xl text-slate-800">Tarification sur devis</div>
                            <div className="font-semibold text-lg text-slate-600">Solution entreprise personnalis√©e</div>
                          </div>
                        </div>
                        <p className="text-base leading-relaxed mb-6 text-slate-700">
                          Votre client a des <strong>besoins qui d√©passent les plans standards</strong>.
                          <br /><br />
                          Notre <strong>√©quipe commerciale</strong> √©tablira une <strong>offre modulaire</strong> adapt√©e √† ses <strong>sp√©cificit√©s</strong>.
                        </p>
                        <div className="pt-4 border-t-2" style={{ borderColor: COLORS.border }}>
                          <div className="font-bold text-xl mb-4 flex items-center gap-3 text-slate-800">
                            <Sparkles className="w-6 h-6" style={{ color: COLORS.primary }} />
                            Avantages exclusifs PME
                          </div>
                          <ul className="space-y-3">
                            <li className="flex items-start gap-3">
                              <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                              <span className="text-slate-700"><strong>Utilisateurs gestion et employ√©s illimit√©s</strong></span>
                            </li>
                            <li className="flex items-start gap-3">
                              <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                              <span className="text-slate-700"><strong>Modules √† la carte</strong> selon vos besoins</span>
                            </li>
                            <li className="flex items-start gap-3">
                              <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                              <span className="text-slate-700"><strong>Account Manager d√©di√©</strong> et accompagnement personnalis√©</span>
                            </li>
                          </ul>
                        </div>
                      </div>
                    )}

                    {!isPME && state.result.fonctionnalites.length > 0 && (
                      <div className="p-6 rounded-xl border-2" style={{ backgroundColor: COLORS.lightBg, borderColor: COLORS.border }}>
                        <div className="font-bold text-xl mb-4 flex items-center gap-3 text-slate-800">
                          <Sparkles className="w-6 h-6" style={{ color: COLORS.primary }} />
                          Fonctionnalit√©s principales
                        </div>
                        <ul className="space-y-3">
                          {state.result.fonctionnalites.map((f, i) => (
                            <li key={i} className="flex items-start gap-3">
                              <CheckCircle2 className="w-5 h-5 flex-shrink-0 mt-0.5" style={{ color: COLORS.primary }} />
                              <span className="text-slate-700">{f}</span>
                            </li>
                          ))}
                        </ul>
                      </div>
                    )}
                  </CardContent>
                </Card>

                <div className="flex gap-4">
                  <Button onClick={goBack} variant="outline" className="flex-1 font-semibold text-lg">
                    Recommencer
                  </Button>
                  <Button 
                    onClick={() => setShowEmailPage(true)} 
                    className="flex-1 font-semibold text-lg text-white"
                    style={{ backgroundColor: COLORS.primary, color: COLORS.background }}
                  >
                    Obtenir un devis
                  </Button>
                </div>
              </div>
            );
          };

          return (
            <div className="min-h-screen bg-gradient-to-br from-teal-50 via-cyan-50 to-emerald-50 p-4 md:p-8">
              <div className="max-w-4xl mx-auto">
                <div className="text-center mb-10">
                  <div className="inline-block mb-6">
                    <div className="flex items-center gap-3 px-6 py-3 bg-white rounded-xl shadow-md">
                      <svg width="36" height="36" viewBox="0 0 100 100" fill="none">
                        <circle cx="40" cy="50" r="25" fill="#00F872" />
                        <circle cx="60" cy="50" r="25" fill="#006666" />
                      </svg>
                      <span className="font-bold text-2xl text-slate-700">pennylane</span>
                    </div>
                  </div>
                  <h1 className="text-5xl font-bold mb-4 text-slate-800">
                    Quel plan d'abonnement choisir ?
                  </h1>
                  <p className="text-lg max-w-3xl mx-auto leading-relaxed text-slate-600">
                    Gr√¢ce √† ce simulateur, trouvez en quelques questions le plan d'abonnement adapt√© aux besoins de votre client
                  </p>
                </div>

                {state.step < maxSteps && (
                  <div className="mb-10">
                    <div className="flex justify-between text-base font-semibold mb-4 text-slate-600">
                      <span className="flex items-center gap-3">
                        <span 
                          className="w-8 h-8 rounded-full text-white flex items-center justify-center text-sm font-bold" 
                          style={{ backgroundColor: COLORS.primary }}
                        >
                          {Math.min(state.step + 1, 6)}
                        </span>
                        Question {Math.min(state.step + 1, 6)} / 6
                      </span>
                      <span className="font-bold" style={{ color: COLORS.primary }}>
                        {getProgressPercentage()}%
                      </span>
                    </div>
                    <div className="h-3 bg-gray-200 rounded-full overflow-hidden">
                      <div
                        className="h-full transition-all duration-500 rounded-full"
                        style={{ width: `${getProgressPercentage()}%`, backgroundColor: COLORS.primary }}
                      />
                    </div>
                  </div>
                )}

                <Card className="shadow-2xl border-2" style={{ borderColor: COLORS.border }}>
                  <CardContent className="p-10 md:p-12">
                    {state.step < maxSteps 
                      ? renderQuestion() 
                      : (showEmailPage ? renderEmailPage() : renderResult())
                    }

                    {state.step < maxSteps && (
                      <div className="flex gap-3 mt-8">
                        {state.step > 0 && (
                          <Button 
                            onClick={goBack} 
                            variant="outline"
                            className="flex items-center justify-center gap-2"
                          >
                            <ArrowLeft className="w-4 h-4" />
                            Retour
                          </Button>
                        )}
                        <Button
                          onClick={goNext}
                          disabled={!canProceed()}
                          className="flex-1 flex items-center justify-center gap-2"
                          style={{ 
                            backgroundColor: canProceed() ? COLORS.primary : '#e5e7eb',
                            color: canProceed() ? COLORS.background : '#9ca3af'
                          }}
                        >
                          Suivant
                          <ArrowRight className="w-4 h-4" />
                        </Button>
                      </div>
                    )}
                  </CardContent>
                </Card>

                <div className="text-center mt-8 text-sm text-slate-500">
                  <p className="font-medium">
                    Simulateur Partenaires Prescripteurs - Quel plan d'abonnement choisir ?
                  </p>
                </div>
              </div>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<SimulateurPlanPennylane />);
    </script>
</body>
</html>
